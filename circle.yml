# customize CircleCI deploy
machine:
  python:
    version: 3.6.1
  environment:
    DATABASE_URL: postgresql://test_admin:T3stTh4t@main-test.cmmrjsgb2ell.us-west-1.rds.amazonaws.com:5432/main_test


test:
  override:
    - ./scripts/test.py

# AWS CodeDeploy settings
deployment:
  staging:
    branch: staging
    codedeploy:
      Authorizer-Staging:
        application_root: /
        revision_location:
          revision_type: S3
          s3_location:
            bucket: missionu-deployments
            key_pattern: authorizer-staging/deploy-{SHORT_COMMIT}-{BUILD_NUM}
        region: us-west-1
        deployment_group: InPlace-1
        deployment_config: CodeDeployDefault.OneAtATime
